<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Primary Meta Tags -->
  <meta name="title" content="ML-Trading | Machine Learning Enhanced Trading Strategy for Tencent Stock">
  <meta name="description" content="Course project: ML-driven price forecasting and index-enhanced trading strategy on Tencent daily stock data with risk control, aiming for excess return with low maximum drawdown.">
  <meta name="keywords" content="quantitative trading, machine learning, stock prediction, factor mining, backtesting, risk control, drawdown, Tencent stock, index enhancement">
  <meta name="author" content="Zepeng Lin, Guanyu Xin, Yuxuan Xue">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="South China University of Technology">
  <meta property="og:title" content="ML-Trading">
  <meta property="og:description" content="ML-driven forecasting + trading + risk control for Tencent daily stock data, targeting excess return with low max drawdown.">
  <!-- TODO: Replace with your real GitHub Pages URL -->
  <meta property="og:url" content="https://YOUR_GITHUB_USERNAME.github.io/YOUR_REPO_NAME/">
  <!-- TODO: Put a 1200x630 image at static/images/social_preview.png -->
  <meta property="og:image" content="static/images/social_preview.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="ML-Trading - Project Preview">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ML-Trading">
  <meta name="twitter:description" content="ML-driven forecasting + trading + risk control for Tencent daily stock data, targeting excess return with low max drawdown.">
  <meta name="twitter:image" content="static/images/social_preview.png">
  <meta name="theme-color" content="#2563eb">

  <title>ML-Trading | SCUT Course Project</title>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link rel="apple-touch-icon" href="static/images/favicon.ico">

  <!-- Critical CSS -->
  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <!-- Non-critical CSS -->
  <link rel="preload" href="static/css/bulma-carousel.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="static/css/bulma-slider.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="static/css/fontawesome.all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">

  <noscript>
    <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
    <link rel="stylesheet" href="static/css/bulma-slider.min.css">
    <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  </noscript>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- JS (defer) -->
  <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script defer src="static/js/bulma-carousel.min.js"></script>
  <script defer src="static/js/bulma-slider.min.js"></script>
  <script defer src="static/js/index.js"></script>

  <!-- Simple structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    "name": "ML-Trading",
    "description": "Machine learning enhanced trading strategy on Tencent daily stock data with risk control.",
    "creator": [
      {"@type":"Person","name":"Zepeng Lin"},
      {"@type":"Person","name":"Guanyu Xin"},
      {"@type":"Person","name":"Yuxuan Xue"}
    ],
    "publisher": {"@type":"Organization","name":"South China University of Technology"},
    "url": "https://YOUR_GITHUB_USERNAME.github.io/YOUR_REPO_NAME/"
  }
  </script>
</head>

<body>
  <!-- Scroll to Top -->
  <button class="scroll-to-top" onclick="scrollToTop()" title="Scroll to top" aria-label="Scroll to top">
    <i class="fas fa-chevron-up"></i>
  </button>

  <main id="main-content">
    <!-- Hero -->
    <section class="hero">
      <div class="hero-body">
        <div class="container is-max-desktop">
          <div class="columns is-centered">
            <div class="column has-text-centered">

              <h1 class="title is-1 publication-title">ML-Trading</h1>
              <p class="subtitle is-5" style="margin-top: .75rem;">
                Machine Learning Enhanced Trading Strategy on Tencent Daily Stock Data (Index Enhancement)
              </p>

              <div class="is-size-5 publication-authors" style="margin-top: 1rem;">
                <span class="author-block">Zepeng Lin</span>,
                <span class="author-block">Guanyu Xin</span>,
                <span class="author-block">Yuxuan Xue</span>
              </div>

              <div class="is-size-6 publication-authors" style="margin-top: .5rem;">
                <span class="author-block">
                  South China University of Technology (SCUT)<br>
                  Instructors: Jin Xu, Qi Liu
                </span>
              </div>

              <div class="column has-text-centered" style="margin-top: 1.25rem;">
                <div class="publication-links">

                  <!-- Report PDF -->
                  <span class="link-block">
                    <a href="static/Machine_Learning_2025_Fall (1).pdf" target="_blank"
                       class="external-link button is-normal is-rounded is-dark">
                      <span class="icon"><i class="fas fa-file-pdf"></i></span>
                      <span>Report (PDF)</span>
                    </a>
                  </span>

                  <!-- Code repo -->
                  <span class="link-block">
                    <!-- TODO: replace with your repo link -->
                    <a href="https://github.com/oplisty/Machine-Learning-2025Fall" target="_blank"
                       class="external-link button is-normal is-rounded is-dark">
                      <span class="icon"><i class="fab fa-github"></i></span>
                      <span>Code</span>
                    </a>
                  </span>

                  <!-- Dataset / Raw data -->
                  <span class="link-block">
                    <!-- TODO: replace with your dataset link or point to your repo folder -->
                    <a href="static/data.csv" target="_blank"
                       class="external-link button is-normal is-rounded is-dark">
                      <span class="icon"><i class="fas fa-database"></i></span>
                      <span>Data</span>
                    </a>
                  </span>

                  <!-- Results -->
                  <span class="link-block">
                    <a href="#results"
                       class="external-link button is-normal is-rounded is-dark">
                      <span class="icon"><i class="fas fa-chart-line"></i></span>
                      <span>Results</span>
                    </a>
                  </span>

                </div>
              </div>

              <div class="content has-text-centered" style="margin-top: 1rem;">
                <p style="max-width: 880px; margin: 0 auto;">
                  We build an end-to-end pipeline including data preprocessing, factor mining, machine learning forecasting,
                  and an enhanced trading strategy with risk control. The goal is to achieve excess return over a baseline
                  strategy while keeping maximum drawdown as low as possible.
                </p>
                <p style="margin-top: .5rem;">
                  <strong>Training:</strong> 2018–2023 &nbsp;|&nbsp;
                  <strong>Backtest:</strong> 2024-01-01 to 2025-04-24 &nbsp;|&nbsp;
                  <strong>Initial Capital:</strong> 100,000 CNY
                </p>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Assignment Requirements -->
    <section class="section hero is-light">
      <div class="container is-max-desktop">
        <div class="columns is-centered has-text-centered">
          <div class="column is-four-fifths">
            <h2 class="title is-3">Assignment Requirements</h2>
            <div class="content has-text-justified">
              <ol>
                <li><strong>Data preprocessing:</strong> clean the provided Tencent daily stock data and mine informative factors.</li>
                <li><strong>Machine learning forecasting:</strong> build a model with good predictive performance for stock prices/returns.</li>
                <li><strong>Trading strategy:</strong> generate buy/sell timing signals from predictions to achieve index enhancement (excess return).</li>
                <li><strong>Risk control:</strong> maximize profit while keeping maximum drawdown as low as possible.</li>
                <li><strong>Visualization & evaluation:</strong> visualize final investment results and evaluate against actual data.</li>
                <li><strong>Report:</strong> clearly describe algorithms, training procedure, feature engineering, preprocessing, and advantages of ML for this task.</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Raw Data -->
    <section class="section">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Raw Stock Data</h2>
    
        <div class="content">
          <p>
            We use Tencent daily OHLCV-style data. The dataset spans <strong>2018-01-02</strong> to
            <strong>2025-04-24</strong> with <strong>1,797</strong> trading-day records and the following fields:
            <code>timestamps, open, high, low, close, volume, amount</code>.
          </p>
    
          <ul>
            <li><strong>Training set:</strong> 2018-01-02 to 2023-12-31</li>
            <li><strong>Backtest set:</strong> 2024-01-01 to 2025-04-24</li>
          </ul>
    
          <p>
            Full data file:
            <a href="static/data.csv" target="_blank" rel="noopener">static/data.csv</a>
          </p>
        </div>
    
        <div class="box">
          <h3 class="title is-6">Data Preview (first 6 rows)</h3>
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>timestamps</th><th>open</th><th>high</th><th>low</th><th>close</th><th>volume</th><th>amount</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>2018-01-02</td><td>364.39</td><td>374.39</td><td>363.99</td><td>374.19</td><td>240,805</td><td>10.01B</td></tr>
                <tr><td>2018-01-03</td><td>380.39</td><td>383.19</td><td>375.39</td><td>378.59</td><td>227,802</td><td>9.64B</td></tr>
                <tr><td>2018-01-04</td><td>383.39</td><td>388.79</td><td>380.59</td><td>388.19</td><td>279,045</td><td>11.97B</td></tr>
                <tr><td>2018-01-05</td><td>392.79</td><td>392.79</td><td>384.59</td><td>389.59</td><td>199,584</td><td>8.61B</td></tr>
                <tr><td>2018-01-08</td><td>392.59</td><td>395.59</td><td>390.19</td><td>394.99</td><td>179,948</td><td>7.86B</td></tr>
                <tr><td>2018-01-09</td><td>397.39</td><td>402.79</td><td>395.39</td><td>400.19</td><td>244,765</td><td>10.85B</td></tr>
              </tbody>
            </table>
          </div>
        </div>
    
      </div>
    </section>

    <!-- Data Preprocessing -->
    <section class="section hero is-light" id="data-preprocessing">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Data Preprocessing</h2>
    
        <div class="content">
          <ul>
            <li><strong>Cleaning:</strong> handle missing values, non-trading days, and abnormal entries.</li>
            <li><strong>Adjustments:</strong> ensure consistent price series (if adjusted prices are available/needed).</li>
            <li><strong>Labeling:</strong> define prediction targets (e.g., next-day return, next-day close, direction).</li>
            <li><strong>Normalization:</strong> apply scaling/standardization where appropriate (especially for neural nets).</li>
            <li><strong>Walk-forward split:</strong> avoid leakage by respecting time order during training/validation.</li>
          </ul>
    
          <p>
            <strong>Tip:</strong> In the final report, explicitly state target definition, feature window sizes,
            and how you prevent look-ahead bias.
          </p>
        </div>
    
        <div class="box">
          <figure class="image">
            <img src="static/images/dataprocessing.png" alt="Data preprocessing workflow" loading="lazy">
          </figure>
          <p class="has-text-centered is-size-7" style="margin-top:.5rem;">
            Data preprocessing workflow used in this project.
          </p>
        </div>
    
      </div>
    </section>


    <!-- Factor Mining -->
    <section class="section" id="factors">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Factor Mining Results</h2>
    
        <div class="content">
          <p>
            We mine predictive factors from price and volume information (momentum, volatility, candlestick shapes,
            volume/flow). Factor quality is evaluated by Information Coefficient (IC) and rank-based IC.
          </p>
        </div>
    
        <div class="columns is-multiline">
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Top Factors by |Rank-IC|</h3>
              <figure class="image">
                <img src="static/images/alpha/top_factors_by_abs_rank_ic.png" alt="Top factors by abs rank IC" loading="lazy">
              </figure>
              <p class="has-text-centered is-size-7">Ranking factors by absolute Spearman rank-IC.</p>
            </div>
          </div>
    
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Pearson vs Spearman IC</h3>
              <figure class="image">
                <img src="static/images/alpha/pearson_vs_spearman_ic.png" alt="Pearson vs Spearman IC" loading="lazy">
              </figure>
              <p class="has-text-centered is-size-7">Comparing linear IC (Pearson) and rank IC (Spearman).</p>
            </div>
          </div>
        </div>
    
        <div class="box">
          <h3 class="title is-6">Top-10 Factors (from IC ranking)</h3>
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>factor</th><th>pearson_ic</th><th>spearman_ic</th><th>abs_rank_ic</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>price_vwap_diff</td><td>-0.1040</td><td>-0.1233</td><td>0.1233</td></tr>
                <tr><td>ma_20</td><td>-0.0926</td><td>-0.0963</td><td>0.0963</td></tr>
                <tr><td>ma_5</td><td>-0.0894</td><td>-0.0906</td><td>0.0906</td></tr>
                <tr><td>volatility_10</td><td>0.1167</td><td>0.0836</td><td>0.0836</td></tr>
                <tr><td>volatility_20</td><td>0.1184</td><td>0.0775</td><td>0.0775</td></tr>
                <tr><td>upper_shadow</td><td>0.1070</td><td>0.0638</td><td>0.0638</td></tr>
                <tr><td>hl_vol</td><td>0.1254</td><td>0.0620</td><td>0.0620</td></tr>
                <tr><td>lower_ratio</td><td>-0.0692</td><td>-0.0600</td><td>0.0600</td></tr>
                <tr><td>lower_shadow</td><td>-0.0571</td><td>-0.0561</td><td>0.0561</td></tr>
                <tr><td>vol_roc_5</td><td>0.0458</td><td>0.0537</td><td>0.0537</td></tr>
              </tbody>
            </table>
          </div>
          <p class="has-text-centered is-size-7">
            Factors are computed on the training period and evaluated by IC against future returns.
          </p>
        </div>
    
      </div>
    </section>



    <!-- Prediction Model -->
    <section class="section hero is-light" id="model">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Prediction Model and Forecasting Results</h2>
    
        <div class="content">
          <p>
            We train an XGBoost-based forecasting model using factors mined from price and volume. The model is trained
            on 2018–2023 and evaluated with time-aware splits (train/valid/test).
          </p>
        </div>
    
        <div class="box">
          <div class="forecast-carousel">
            <div class="forecast-carousel-inner">
              <!-- 1. Train close -->
              <div class="forecast-slide is-active">
                <img src="train_forecast_close.png" alt="Train forecast close" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Train Forecast (Close)
                </p>
              </div>
              <!-- 2. Train volume -->
              <div class="forecast-slide">
                <img src="train_forecast_volume.png" alt="Train forecast volume" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Train Forecast (Volume)
                </p>
              </div>
              <!-- 3. Valid close -->
              <div class="forecast-slide">
                <img src="valid_forecast_close.png" alt="Valid forecast close" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Valid Forecast (Close)
                </p>
              </div>
              <!-- 4. Valid volume -->
              <div class="forecast-slide">
                <img src="valid_forecast_volume.png" alt="Valid forecast volume" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Valid Forecast (Volume)
                </p>
              </div>
              <!-- 5. Test close -->
              <div class="forecast-slide">
                <img src="test_forecast_close.png" alt="Test forecast close" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Test Forecast (Close)
                </p>
              </div>
              <!-- 6. Test volume -->
              <div class="forecast-slide">
                <img src="test_forecast_volume.png" alt="Test forecast volume" loading="lazy">
                <p class="has-text-centered is-size-6" style="margin-top:.5rem;">
                  Test Forecast (Volume)
                </p>
              </div>
            </div>
    
            <div class="forecast-carousel-nav">
              <button class="nav-btn forecast-prev" type="button" aria-label="Previous slide">
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
              </button>
              <button class="nav-btn forecast-next" type="button" aria-label="Next slide">
                <i class="fa fa-chevron-right" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
    
        <div class="box">
          <h3 class="title is-6">Model Evaluation Summary</h3>
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>split</th><th>mae</th><th>rmse</th><th>spearman_ic</th><th>direction_acc</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>train</td><td>0.0181</td><td>0.0257</td><td>1.0000</td><td>98.86%</td></tr>
                <tr><td>valid</td><td>6.3936</td><td>8.6984</td><td>-0.0474</td><td>48.76%</td></tr>
                <tr><td>test</td><td>7.8201</td><td>10.6094</td><td>-0.0055</td><td>48.13%</td></tr>
              </tbody>
            </table>
          </div>
          <p class="is-size-7">
            We use the model score mainly for relative ranking and trading signal generation rather than pure price-level accuracy.
          </p>
        </div>
    
      </div>
    </section>


    <!-- Strategies Comparison -->
    <!-- Strategies Comparison -->
    <section class="section" id="strategies">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Strategy Comparison</h2>
    
        <!-- Part 1: different strategies -->
        <div class="box">
          <h3 class="title is-4">Part I — Comparing Different Strategies</h3>
    
          <div class="content">
            <p>
              We benchmark our pipeline against several alternative strategies implemented in Backtrader. All strategies
              use the same data window (2024-01-01 to 2025-04-24) and initial cash (100,000 CNY).
            </p>
    
            <h4 class="title is-6">Strategies included</h4>
            <ul>
              <li><strong>Benchmark (Buy &amp; Hold):</strong> fully invested throughout the backtest.</li>
              <li><strong>StrategyH_HighAlphaOverlay:</strong> score-ranked overlay around beta=1 (more aggressive).</li>
              <li><strong>StrategyB_BalancedEnhanced:</strong> quantile-based 0.7 / 1.0 / 1.3 exposure (balanced).</li>
              <li><strong>StrategyD_DefensiveMeanRev:</strong> defensive mean-reversion with smaller exposure.</li>
              <li><strong>StrategyHPP_QlibStyle:</strong> Qlib-style aggressive enhancement with risk controls.</li>
              <li><strong>StrategyBPP_QlibStyle:</strong> Qlib-style balanced enhancement with stricter risk controls.</li>
            </ul>
          </div>
    
          <h4 class="title is-5">Backtest Summary (Alternative Strategies)</h4>
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>Strategy</th>
                  <th>Final Value (CNY)</th>
                  <th>Total Return</th>
                  <th>Annual Return</th>
                  <th>Annual Vol</th>
                  <th>Sharpe</th>
                  <th>Max Drawdown</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Benchmark_BuyAndHold</td>
                  <td>163,127.2</td>
                  <td>63.13%</td>
                  <td>47.02%</td>
                  <td>34.32%</td>
                  <td>1.37</td>
                  <td>-23.49%</td>
                </tr>
                <tr>
                  <td>StrategyH_HighAlphaOverlay</td>
                  <td>151,876.7</td>
                  <td>51.88%</td>
                  <td>38.97%</td>
                  <td>24.51%</td>
                  <td>1.59</td>
                  <td>-12.93%</td>
                </tr>
                <tr>
                  <td>StrategyB_BalancedEnhanced</td>
                  <td>151,774.2</td>
                  <td>51.77%</td>
                  <td>38.90%</td>
                  <td>28.27%</td>
                  <td>1.38</td>
                  <td>-16.25%</td>
                </tr>
                <tr>
                  <td>StrategyD_DefensiveMeanRev</td>
                  <td>123,608.0</td>
                  <td>23.61%</td>
                  <td>18.16%</td>
                  <td>18.16%</td>
                  <td>1.00</td>
                  <td>-12.92%</td>
                </tr>
                <tr>
                  <td>StrategyHPP_QlibStyle</td>
                  <td>146,811.1</td>
                  <td>46.81%</td>
                  <td>35.31%</td>
                  <td>24.74%</td>
                  <td>1.43</td>
                  <td>-12.93%</td>
                </tr>
                <tr>
                  <td>StrategyBPP_QlibStyle</td>
                  <td>158,576.4</td>
                  <td>58.58%</td>
                  <td>43.78%</td>
                  <td>30.63%</td>
                  <td>1.43</td>
                  <td>-19.57%</td>
                </tr>
              </tbody>
            </table>
          </div>
    
          <div class="content">
            <h4 class="title is-5">Why can these strategies underperform Buy &amp; Hold?</h4>
            <ul>
              <li>
                <strong>Beta reduction / time-out-of-market:</strong> most alternative strategies deliberately spend time
                below 100% exposure to control risk. In a strong uptrend, <em>reducing exposure</em> can lower returns.
              </li>
              <li>
                <strong>Noisy out-of-sample signals:</strong> if the prediction/factor score is weak (low IC / ~50% direction accuracy),
                timing trades may miss rallies and create whipsaws, hurting total return.
              </li>
              <li>
                <strong>Risk controls trade return for stability:</strong> trend/volatility/drawdown filters help avoid deep losses,
                but they also cut participation during fast rebounds.
              </li>
            </ul>
    
            <h4 class="title is-5">Advantages of these strategies</h4>
            <ul>
              <li>
                <strong>Better drawdown control:</strong> e.g., StrategyH_HighAlphaOverlay and StrategyHPP_QlibStyle
                reduce max drawdown to ~<strong>-12.9%</strong> vs <strong>-23.5%</strong> for Buy &amp; Hold.
              </li>
              <li>
                <strong>Lower volatility / higher risk-adjusted performance:</strong> StrategyH_HighAlphaOverlay achieves a higher
                Sharpe (1.59) with much lower volatility (24.5%).
              </li>
              <li>
                <strong>Different “styles” for different preferences:</strong> DefensiveMeanRev is designed for stability,
                while Qlib-style strategies add systematic risk controls (trend, vol, drawdown guards, position smoothing).
              </li>
            </ul>
    
            <div class="notification is-info is-light">
              <strong>Takeaway:</strong> The baseline is hard to beat in a trending market. Alternative strategies are still valuable
              because they often deliver <em>much smaller drawdowns</em> and <em>smoother equity curves</em>.
            </div>
          </div>
        </div>
    
        <!-- Part 2: final strategy + horizon variants -->
        <div class="box">
          <h3 class="title is-4">Part II — Our Final Strategy and Horizon Variants</h3>
    
          <div class="content">
            <h4 class="title is-5">Final Strategy: Conviction_Filter_Strategy</h4>
            <p>
              Our final submission is a <strong>conviction-based long-only strategy</strong>. Each day we compute a blended score
              from (i) the standardized ML predicted return score and (ii) a composite alpha-factor score:
              <br>
              <code>score_t = w_pred · z(r_pred)_t + w_alpha · alpha_score_t</code>.
            </p>
            <p>
              We then compute rolling quantile thresholds from recent score history (lookback window) and map
              score into <strong>discrete exposure</strong>: 0 / 0.5 / 1.0. This design improves robustness and reduces turnover
              compared to continuous leverage scaling.
            </p>
    
            <h4 class="title is-6">Ablation-selected best parameters</h4>
            <ul>
              <li><strong>Best weights:</strong> <code>w_alpha = 0.22</code>, <code>w_pred = 0.78</code> (found by grid ablation).</li>
              <li><strong>Best thresholds:</strong> <code>q_exit = 0.09</code>, <code>q_half = 0.12</code> (found by grid ablation with constraint <code>q_exit &lt; q_half</code>).</li>
            </ul>
          </div>
    
          <h4 class="title is-5">Final Strategy Performance (Overall)</h4>
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>Strategy</th>
                  <th>Final Value (CNY)</th>
                  <th>Total Return</th>
                  <th>Annual Return</th>
                  <th>Annual Vol</th>
                  <th>Sharpe</th>
                  <th>Max Drawdown</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Benchmark_BuyAndHold</td>
                  <td>163,127.2</td>
                  <td>63.13%</td>
                  <td>47.02%</td>
                  <td>34.32%</td>
                  <td>1.37</td>
                  <td>-23.49%</td>
                </tr>
                <tr>
                  <td><strong>Conviction_Filter_Strategy (Final)</strong></td>
                  <td><strong>224,877.5</strong></td>
                  <td><strong>124.88%</strong></td>
                  <td><strong>89.30%</strong></td>
                  <td><strong>27.00%</strong></td>
                  <td><strong>3.31</strong></td>
                  <td><strong>-12.93%</strong></td>
                </tr>
              </tbody>
            </table>
          </div>
    
          <div class="content">
            <h4 class="title is-5">Horizon Variants (pre1 / pre3 / pre5 / 10-day→1-day)</h4>
            <p>
              To test robustness, we run the same strategy logic under four forecasting settings:
            </p>
            <ul>
              <li><strong>pre1:</strong> predict the next-day return and trade daily.</li>
              <li><strong>pre3:</strong> predict 3-day ahead (smoother signal, potentially lower noise but more lag).</li>
              <li><strong>pre5:</strong> predict 5-day ahead (even smoother, but may react slower to regime changes).</li>
              <li><strong>10-day window → 1-day prediction:</strong> use the previous 10 trading days as input features to predict next-day return (more context for short-horizon prediction).</li>
            </ul>
            <p class="is-size-7">
              Below is the table template. Replace the TODO cells with the values from your
              <code>backtest_results_longonly.csv</code> (pre1/pre3/pre5/10→1). If you paste that CSV here, I can fill the table for you.
            </p>
          </div>
    
          <div class="table-container">
            <table class="table is-striped is-fullwidth is-size-7">
              <thead>
                <tr>
                  <th>Setting</th>
                  <th>Final Value (CNY)</th>
                  <th>Total Return</th>
                  <th>Annual Return</th>
                  <th>Annual Vol</th>
                  <th>Sharpe</th>
                  <th>Max Drawdown</th>
                  <th>Interpretation</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>pre1</strong> (1-day ahead)</td>
                  <td>142,650.4</td>
                  <td>42.65%</td>
                  <td>32.16%</td>
                  <td>28.37%</td>
                  <td>1.13</td>
                  <td>-24.88%</td>
                  <td>Most responsive, but most sensitive to noise.</td>
                </tr>
                
                <tr>
                  <td><strong>pre3</strong> (3-day ahead)</td>
                  <td>190,351.4</td>
                  <td>90.35%</td>
                  <td>65.75%</td>
                  <td>28.78%</td>
                  <td>2.28</td>
                  <td>-15.07%</td>
                  <td>Smoother signal; may reduce whipsaws but can lag turning points.</td>
                </tr>
                
                <tr>
                  <td><strong>pre5</strong> (5-day ahead)</td>
                  <td>170,123.4</td>
                  <td>70.12%</td>
                  <td>51.76%</td>
                  <td>29.59%</td>
                  <td>1.75</td>
                  <td>-20.44%</td>
                  <td>Even smoother; can miss fast rebounds but improves stability.</td>
                </tr>
                
                <tr>
                  <td>10-day window → 1-day pred</td>
                  <td>213,918.9</td>
                  <td>113.92%</td>
                  <td>82.00%</td>
                  <td>26.84%</td>
                  <td>3.05</td>
                  <td>-12.93%</td>
                  <td>Uses richer short-term context; often improves robustness vs pure 1-day inputs.</td>
                </tr>

              </tbody>
            </table>
          </div>
    
          <div class="notification is-warning is-light">
            <strong>Note:</strong> If a longer-horizon variant underperforms, it is often because the signal reacts slower to
            fast price moves. If a shorter-horizon variant underperforms, it is often due to noise and frequent regime flips.
          </div>
        </div>
      </div>
    </section>


    <!-- Weight & Quantile Threshold Selection (Ablation) -->
    <section class="section hero is-light" id="param-selection">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Weight &amp; Threshold Selection (Ablation Study)</h2>
    
        <div class="content">
          <p>
            Our final strategy uses a <strong>conviction score</strong> to map signals into discrete positions
            (<code>0</code>, <code>0.5</code>, <code>1.0</code>). We tune:
            (1) the blending weights between the ML prediction score and the alpha-factor score, and
            (2) the rolling quantile thresholds that trigger exit / half position.
          </p>
        </div>
    
        <div class="columns is-multiline">
    
          <!-- (A) Weight selection -->
          <div class="column is-12">
            <div class="box">
              <h3 class="title is-5">A) Weight Selection: <code>w_alpha</code> vs <code>w_pred</code></h3>
    
              <div class="content">
                <p>
                  We define the daily conviction score as:
                  <br>
                  <code>score_t = w_pred · z(r_pred)_t + w_alpha · alpha_score_t</code>,
                  where <code>z(r_pred)</code> is the standardized predicted next-day return (trained on 2018–2023),
                  and <code>alpha_score</code> is a composite factor score.
                  The strategy uses <strong>long-only</strong> exposure with a rolling history of scores.
                </p>
    
                <ul>
                  <li><strong>Constraint:</strong> <code>w_pred + w_alpha = 1</code></li>
                  <li><strong>Search:</strong> <code>w_alpha ∈ [0, 1]</code> with step <code>0.02</code> (grid), <code>w_pred = 1 - w_alpha</code></li>
                  <li><strong>Backtest window:</strong> 2024-01-01 to 2025-04-24, initial cash 100,000 CNY, fee rate 0</li>
                  <li><strong>Fixed thresholds during this stage:</strong> <code>lookback=120</code>, <code>q_exit=0.05</code>, <code>q_half=0.11</code></li>
                  <li><strong>Objective:</strong> maximize total return</li>
                </ul>
    
                <p class="is-size-6">
                  <strong>Best (from our grid search):</strong>
                  <code>w_alpha = 0.22</code>, <code>w_pred = 0.78</code>
                  (ratio <code>w_alpha / w_pred ≈ 0.282</code>), achieving
                  <strong>+113.92%</strong> total return in this ablation setting.(Attention: this is the data before we modified the q value. The data described in the previous part is the final data after adjusting the weights and thresholds.)
                </p>
              </div>
    
              <!-- PDF: weight optimization -->
              <div style="border-radius: 12px; overflow: hidden;">
                <object data="static/images/w_alpha_w_pred_optimization_log.pdf#view=FitH&toolbar=0&navpanes=0"
                        type="application/pdf"
                        width="100%"
                        height="620"
                        style="border:0;">
                  <div class="notification is-warning is-light" style="margin:0;">
                    This PDF cannot be displayed in your browser. (Try Chrome / Edge on desktop.)
                  </div>
                </object>
              </div>
              <p class="has-text-centered is-size-7" style="margin-top:.5rem;">
                Log-scale visualization of total return vs. <code>w_alpha / w_pred</code>.
              </p>
            </div>
          </div>
    
          <!-- (B) q threshold selection -->
          <div class="column is-12">
            <div class="box">
              <h3 class="title is-5">B) Rolling Quantile Thresholds: <code>q_exit</code> &amp; <code>q_half</code></h3>
    
              <div class="content">
                <p>
                  Given the score history over the most recent <code>lookback=120</code> days, we compute
                  rolling quantile cutoffs:
                  <code>thr_exit(t) = Quantile(score_hist, q_exit)</code>,
                  <code>thr_half(t) = Quantile(score_hist, q_half)</code>.
                  We then map today’s score into position:
                  <strong>0</strong> if <code>score &lt; thr_exit</code>,
                  <strong>0.5</strong> if <code>thr_exit ≤ score &lt; thr_half</code>,
                  else <strong>1</strong>.
                </p>
    
                <ul>
                  <li><strong>Fixed weights:</strong> <code>w_pred=0.78</code>, <code>w_alpha=0.22</code></li>
                  <li><strong>Search ranges:</strong> <code>q_exit ∈ [0.00, 0.20]</code>, <code>q_half ∈ [0.00, 0.40]</code> (step <code>0.01</code>)</li>
                  <li><strong>Constraint:</strong> <code>q_exit &lt; q_half</code></li>
                  <li><strong>Objective:</strong> maximize total return on 2024-01-01 to 2025-04-24</li>
                </ul>
    
                <p class="is-size-6">
                  <strong>Best (from our grid search):</strong>
                  <code>q_exit = 0.09</code>, <code>q_half = 0.12</code>,
                  achieving <strong>+71.89%</strong> total return in this threshold-tuning setting.
                  Note that <code>q_exit</code> and <code>q_half</code> are <em>quantile levels</em>;
                  the actual numeric thresholds change over time with the rolling score distribution.
                </p>
              </div>
    
              <!-- PDF: q optimization -->
              <div style="border-radius: 12px; overflow: hidden;">
                <object data="static/images/q_params_optimization_3d.pdf#view=FitH&toolbar=0&navpanes=0"
                        type="application/pdf"
                        width="100%"
                        height="620"
                        style="border:0;">
                  <div class="notification is-warning is-light" style="margin:0;">
                    This PDF cannot be displayed in your browser. (Try Chrome / Edge on desktop.)
                  </div>
                </object>
              </div>
              <p class="has-text-centered is-size-7" style="margin-top:.5rem;">
                3D surface/scatter of total return over <code>(q_exit, q_half)</code>.
              </p>
            </div>
          </div>
    
        </div>
      </div>
    </section>
    <!-- End Weight & Quantile Threshold Selection -->


    <!-- Final Strategy Results -->
    <!-- Final Strategy Results (PNG version) -->
    <section class="section hero is-light" id="results">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Final Strategy Results</h2>
    
        <div class="content">
          <p>
            We select <strong>Conviction_Filter_Strategy</strong> as the final submission. The backtest runs from
            <strong>2024-01-01</strong> to <strong>2025-04-24</strong> with initial capital <strong>100,000 CNY</strong>.
            Below we visualize return, risk, exposure, and signal effectiveness. All figures are rendered as high-resolution PNGs.
          </p>
        </div>
    
        <!-- At-a-glance metrics -->
        <div class="columns is-multiline">
          <div class="column is-3">
            <div class="box has-text-centered">
              <p class="is-size-7 has-text-grey">Final Value</p>
              <p class="title is-5" style="margin:.25rem 0;">224,877.5</p>
              <p class="is-size-7 has-text-grey">CNY</p>
            </div>
          </div>
          <div class="column is-3">
            <div class="box has-text-centered">
              <p class="is-size-7 has-text-grey">Total Return</p>
              <p class="title is-5" style="margin:.25rem 0;">124.88%</p>
              <p class="is-size-7 has-text-grey">vs 63.13% Buy &amp; Hold</p>
            </div>
          </div>
          <div class="column is-3">
            <div class="box has-text-centered">
              <p class="is-size-7 has-text-grey">Sharpe</p>
              <p class="title is-5" style="margin:.25rem 0;">3.31</p>
              <p class="is-size-7 has-text-grey">vs 1.37 Buy &amp; Hold</p>
            </div>
          </div>
          <div class="column is-3">
            <div class="box has-text-centered">
              <p class="is-size-7 has-text-grey">Max Drawdown</p>
              <p class="title is-5" style="margin:.25rem 0;">-12.93%</p>
              <p class="is-size-7 has-text-grey">vs -23.49% Buy &amp; Hold</p>
            </div>
          </div>
        </div>
    
        <!-- 5 PNG Figures -->
        <div class="columns is-multiline">
    
          <!-- (1) NAV -->
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Equity Curve (NAV)</h3>
              <figure class="image">
                <img
                  src="static/images/report_nav_curve_1.png"
                  alt="NAV curve comparison"
                  loading="lazy"
                  style="width:100%; height:auto; display:block;"
                >
              </figure>
              <p class="has-text-centered is-size-7" style="margin-top:.6rem;">
                <strong>Stronger growth with smoother trajectory.</strong> Our NAV stays above the benchmark for most of the
                backtest, confirming consistent excess return from the ML + factor conviction signal.
              </p>
            </div>
          </div>
    
          <!-- (2) Drawdown -->
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Drawdown Curve</h3>
              <figure class="image">
                <img
                  src="static/images/report_drawdown_curve_1.png"
                  alt="Drawdown curve comparison"
                  loading="lazy"
                  style="width:100%; height:auto; display:block;"
                >
              </figure>
              <p class="has-text-centered is-size-7" style="margin-top:.6rem;">
                <strong>Downside risk is controlled.</strong> The final strategy cuts max drawdown to <strong>-12.93%</strong>
                (vs <strong>-23.49%</strong> Buy &amp; Hold), showing the quantile-based de-risking rule effectively limits large losses.
              </p>
            </div>
          </div>
    
          <!-- (3) Position / Exposure (full width) -->
          <div class="column is-12">
            <div class="box">
              <h3 class="title is-6">Position / Exposure Over Time</h3>
              <figure class="image">
                <img
                  src="static/images/report_position_curve_1.png"
                  alt="Position/exposure over time"
                  loading="lazy"
                  style="width:100%; height:auto; display:block;"
                >
              </figure>
              <p class="has-text-centered is-size-7" style="margin-top:.6rem;">
                <strong>Stable, interpretable decisions (0 / 0.5 / 1).</strong> Instead of noisy continuous leverage,
                the strategy maps conviction into discrete exposure, reducing whipsaws and turnover while staying invested
                when the signal is strong.
              </p>
            </div>
          </div>
    
          <!-- (4) Quantile return -->
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Return by Score Quantile</h3>
              <figure class="image">
                <img
                  src="static/images/report_quantile_return_1.png"
                  alt="Return by score quantile"
                  loading="lazy"
                  style="width:100%; height:auto; display:block;"
                >
              </figure>
              <p class="has-text-centered is-size-7" style="margin-top:.6rem;">
                <strong>Clear ranking power.</strong> Higher conviction quantiles correspond to higher realized returns,
                validating that the blended score (ML prediction + alpha factors) contains actionable information for timing.
              </p>
            </div>
          </div>
    
          <!-- (5) Score + thresholds -->
          <div class="column is-6">
            <div class="box">
              <h3 class="title is-6">Score &amp; Rolling Thresholds</h3>
              <figure class="image">
                <img
                  src="static/images/report_score_thresholds_1.png"
                  alt="Score and rolling quantile thresholds"
                  loading="lazy"
                  style="width:100%; height:auto; display:block;"
                >
              </figure>
              <p class="has-text-centered is-size-7" style="margin-top:.6rem;">
                <strong>Adaptive risk control.</strong> Rolling quantile thresholds (<code>q_exit</code>, <code>q_half</code>)
                adapt to distribution shifts in the score, helping the strategy reduce exposure during weak-conviction regimes
                and re-risk when conviction improves.
              </p>
            </div>
          </div>
    
        </div>
    
        <!-- Detailed metrics table -->
        <div class="box">
          <h3 class="title is-6">Performance &amp; Risk Metrics</h3>
          <div class="table-container">
            <table class="table is-striped is-fullwidth">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Final Strategy</th>
                  <th>Buy &amp; Hold</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Final Value (CNY)</td><td><strong>224,877.5</strong></td><td>163,127.2</td></tr>
                <tr><td>Total Return</td><td><strong>124.88%</strong></td><td>63.13%</td></tr>
                <tr><td>Annualized Return</td><td><strong>89.30%</strong></td><td>47.02%</td></tr>
                <tr><td>Annualized Volatility</td><td><strong>27.00%</strong></td><td>34.32%</td></tr>
                <tr><td>Sharpe Ratio</td><td><strong>3.31</strong></td><td>1.37</td></tr>
                <tr><td>Maximum Drawdown</td><td><strong>-12.93%</strong></td><td>-23.49%</td></tr>
                <tr><td>Calmar Ratio</td><td><strong>6.91</strong></td><td>2.00</td></tr>
              </tbody>
            </table>
          </div>
    
          <div class="notification is-info is-light" style="margin-top:1rem;">
            <strong>Why this is strong:</strong> The strategy achieves much higher return than Buy &amp; Hold while simultaneously
            lowering volatility and drawdown. This indicates the conviction score + quantile thresholds are not just profitable,
            but also effective at controlling risk.
          </div>
        </div>
    
      </div>
    </section>


    <!-- Evaluation (Strengths Only) -->
    <section class="section" id="evaluation">
      <div class="container is-max-desktop">
        <h2 class="title is-3">Evaluation &amp; Key Advantages</h2>
    
        <div class="content">
          <p>
            We evaluate the final submission (<strong>Conviction_Filter_Strategy</strong>) on the out-of-sample backtest
            period <strong>2024-01-01</strong> to <strong>2025-04-24</strong> with <strong>100,000 CNY</strong> initial capital.
            The strategy is designed to achieve <strong>index enhancement</strong> (excess return over Buy &amp; Hold) while
            keeping <strong>maximum drawdown</strong> as low as possible.
          </p>
        </div>
    
        <div class="box">
          <h3 class="title is-5">1) Performance vs. Benchmark (Buy &amp; Hold)</h3>
    
          <div class="table-container">
            <table class="table is-striped is-fullwidth">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Final Strategy</th>
                  <th>Buy &amp; Hold</th>
                  <th>Improvement</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Final Value (CNY)</td>
                  <td><strong>224,877.5</strong></td>
                  <td>163,127.2</td>
                  <td><strong>+61,750.3</strong></td>
                </tr>
                <tr>
                  <td>Total Return</td>
                  <td><strong>124.88%</strong></td>
                  <td>63.13%</td>
                  <td><strong>+61.75 pp</strong></td>
                </tr>
                <tr>
                  <td>Annualized Return</td>
                  <td><strong>89.30%</strong></td>
                  <td>47.02%</td>
                  <td><strong>+42.28 pp</strong></td>
                </tr>
                <tr>
                  <td>Annualized Volatility</td>
                  <td><strong>27.00%</strong></td>
                  <td>34.32%</td>
                  <td><strong>-7.32 pp</strong></td>
                </tr>
                <tr>
                  <td>Sharpe Ratio</td>
                  <td><strong>3.31</strong></td>
                  <td>1.37</td>
                  <td><strong>+1.94</strong></td>
                </tr>
                <tr>
                  <td>Maximum Drawdown</td>
                  <td><strong>-12.93%</strong></td>
                  <td>-23.49%</td>
                  <td><strong>+10.56 pp (less drawdown)</strong></td>
                </tr>
                <tr>
                  <td>Calmar Ratio</td>
                  <td><strong>6.91</strong></td>
                  <td>2.00</td>
                  <td><strong>+4.91</strong></td>
                </tr>
              </tbody>
            </table>
          </div>
    
          <div class="content">
            <p class="is-size-6">
              <strong>Summary:</strong> The final strategy more than doubles the benchmark’s total return while cutting
              the maximum drawdown by nearly half, delivering substantially stronger risk-adjusted performance.
            </p>
          </div>
        </div>
    
        <div class="box">
          <h3 class="title is-5">2) Why the Strategy Works (Strengths)</h3>
    
          <div class="content">
            <ul>
              <li>
                <strong>Signal fusion (ML + factors):</strong> we combine a standardized ML prediction score with a composite
                alpha-factor score using learned weights (<code>w_pred</code>, <code>w_alpha</code>). This reduces reliance on a single
                noisy signal source and improves robustness across market conditions.
              </li>
              <li>
                <strong>Distribution-aware decision rule:</strong> instead of fixed numeric thresholds, we use rolling
                <em>quantile thresholds</em> (<code>q_exit</code>, <code>q_half</code>) computed from recent score history. This adapts
                automatically when the score distribution shifts (e.g., volatility regime changes).
              </li>
              <li>
                <strong>Discrete exposure (0 / 0.5 / 1):</strong> mapping scores into a small number of stable position levels
                prevents over-trading and reduces whipsaw risk compared to continuous scaling.
              </li>
              <li>
                <strong>Ablation-driven parameter selection:</strong> key parameters are selected via systematic grid-search hinting
                (weight tuning and threshold tuning), ensuring the final configuration is supported by empirical evidence rather than
                manual trial-and-error.
              </li>
              <li>
                <strong>Better downside control:</strong> the strategy reduces deep drawdowns by exiting or de-risking when the conviction
                score falls below the lower quantile, which is especially important for index enhancement tasks requiring controlled risk.
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>


    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="columns is-centered">
          <div class="column is-9">
            <div class="content has-text-centered">
              <p class="is-size-7">
                © 2025 ML-Trading Team (SCUT). All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

  </main>
</body>
</html>
